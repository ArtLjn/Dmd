"use strict";(self["webpackChunkvue_template"]=self["webpackChunkvue_template"]||[]).push([[693],{7284:function(e,l,a){a.d(l,{L8:function(){return o},Rp:function(){return u},ZI:function(){return i},bl:function(){return d},nt:function(){return r}});var t=a(5720);const o=e=>t.A.post("/api/health/uploadInfo",e),d=()=>t.A.get("/api/health/queryAll"),u=e=>t.A.put("/api/health/updateInfo",e),r=e=>t.A.delete(`/api/health/deleteInfoById?id=${e}`),i=()=>t.A.get("/api/health/getAverageData")},1693:function(e,l,a){a.r(l),a.d(l,{default:function(){return F}});var t=a(6768);const o=e=>((0,t.Qi)("data-v-147daeba"),e=e(),(0,t.jt)(),e),d={class:"order-box"},u=o((()=>(0,t.Lk)("span",{style:{"vertical-align":"middle"}}," Search ",-1))),r=o((()=>(0,t.Lk)("br",null,null,-1))),i=o((()=>(0,t.Lk)("br",null,null,-1)));function p(e,l,a,o,p,n){const s=(0,t.g2)("el-input"),m=(0,t.g2)("el-form-item"),h=(0,t.g2)("Search"),b=(0,t.g2)("el-icon"),F=(0,t.g2)("el-button"),c=(0,t.g2)("el-form"),g=(0,t.g2)("el-input-number"),_=(0,t.g2)("el-dialog"),f=(0,t.g2)("el-table-column"),k=(0,t.g2)("el-button-group"),V=(0,t.g2)("el-empty"),w=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",d,[(0,t.bF)(c,{inline:"",style:{float:"left"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"订单号"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{modelValue:p.currentID,"onUpdate:modelValue":l[0]||(l[0]=e=>p.currentID=e),placeholder:"输入订单号进行查询"},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.bF)(F,{type:"primary"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{style:{"vertical-align":"middle"}},{default:(0,t.k6)((()=>[(0,t.bF)(h)])),_:1}),u])),_:1}),(0,t.bF)(F,{class:"button-order",type:"success",plain:"",onClick:l[1]||(l[1]=e=>p.showDialog=!0)},{default:(0,t.k6)((()=>[(0,t.eW)("上传信息")])),_:1}),(0,t.bF)(F,{type:"warning",plain:"",onClick:n.downloadFile},{default:(0,t.k6)((()=>[(0,t.eW)("导出Excel")])),_:1},8,["onClick"])])),_:1})])),_:1})]),(0,t.bF)(_,{modelValue:p.showDialog,"onUpdate:modelValue":l[11]||(l[11]=e=>p.showDialog=e),title:"上传信息",width:"600","lock-scroll":!1},{default:(0,t.k6)((()=>[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"身高"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.uploadForm.height,"onUpdate:modelValue":l[2]||(l[2]=e=>p.uploadForm.height=e),min:1,max:300,placeholder:"单位cm",step:10},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"体重"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.uploadForm.weight,"onUpdate:modelValue":l[3]||(l[3]=e=>p.uploadForm.weight=e),min:1,max:300,placeholder:"单位kg",step:10},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"年龄"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.uploadForm.age,"onUpdate:modelValue":l[4]||(l[4]=e=>p.uploadForm.age=e),min:1,max:200,placeholder:"age",step:1},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"心率"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.uploadForm.heart_rate,"onUpdate:modelValue":l[5]||(l[5]=e=>p.uploadForm.heart_rate=e),min:1,max:300,placeholder:"次/分",step:10},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"视力"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.uploadForm.vision,"onUpdate:modelValue":l[6]||(l[6]=e=>p.uploadForm.vision=e),min:40,max:53,placeholder:"度(40表示4.0)",step:1,style:{width:"170px"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"血压"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.uploadForm.blood_pressure,"onUpdate:modelValue":l[7]||(l[7]=e=>p.uploadForm.blood_pressure=e),min:1,max:200,placeholder:"毫米汞柱/mmHg",style:{width:"180px"},step:10},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"血糖"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.uploadForm.blood_sugar,"onUpdate:modelValue":l[8]||(l[8]=e=>p.uploadForm.blood_sugar=e),min:1,max:20,placeholder:"Mmol/L",step:1},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{style:{float:"right"}},{default:(0,t.k6)((()=>[(0,t.bF)(F,{onClick:l[9]||(l[9]=e=>p.showDialog=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("取消")])),_:1}),(0,t.bF)(F,{type:"primary",onClick:l[10]||(l[10]=e=>n.uploadInfo())},{default:(0,t.k6)((()=>[(0,t.eW)("确认")])),_:1})])),_:1}),r])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(_,{modelValue:p.showUpdateDialog,"onUpdate:modelValue":l[21]||(l[21]=e=>p.showUpdateDialog=e),title:"更新信息",width:"600","lock-scroll":!1},{default:(0,t.k6)((()=>[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"身高"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.updateForm.height,"onUpdate:modelValue":l[12]||(l[12]=e=>p.updateForm.height=e),min:1,max:300,placeholder:"单位cm",step:10},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"体重"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.updateForm.weight,"onUpdate:modelValue":l[13]||(l[13]=e=>p.updateForm.weight=e),min:1,max:300,placeholder:"单位kg",step:10},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"年龄"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.updateForm.age,"onUpdate:modelValue":l[14]||(l[14]=e=>p.updateForm.age=e),min:1,max:200,placeholder:"age",step:1},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"心率"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.updateForm.heart_rate,"onUpdate:modelValue":l[15]||(l[15]=e=>p.updateForm.heart_rate=e),min:1,max:300,placeholder:"次/分",step:10},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"视力"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.updateForm.vision,"onUpdate:modelValue":l[16]||(l[16]=e=>p.updateForm.vision=e),min:40,max:53,placeholder:"度(40表示4.0)",step:1,style:{width:"170px"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"血压"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.updateForm.blood_pressure,"onUpdate:modelValue":l[17]||(l[17]=e=>p.updateForm.blood_pressure=e),min:1,max:200,placeholder:"毫米汞柱/mmHg",style:{width:"180px"},step:10},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{label:"血糖"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:p.updateForm.blood_sugar,"onUpdate:modelValue":l[18]||(l[18]=e=>p.updateForm.blood_sugar=e),min:1,max:20,placeholder:"Mmol/L",step:1},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{style:{float:"right"}},{default:(0,t.k6)((()=>[(0,t.bF)(F,{onClick:l[19]||(l[19]=e=>p.showUpdateDialog=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("取消")])),_:1}),(0,t.bF)(F,{type:"primary",onClick:l[20]||(l[20]=e=>n.updateRecord())},{default:(0,t.k6)((()=>[(0,t.eW)("确认")])),_:1})])),_:1}),i])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(w,{stripe:"",lazy:!0,border:"",height:"700",data:p.data},{empty:(0,t.k6)((()=>[(0,t.bF)(V,{description:e.description},null,8,["description"])])),default:(0,t.k6)((()=>[(0,t.bF)(f,{label:"ID",prop:"id",sortable:""}),(0,t.bF)(f,{label:"身高",prop:"height",sortable:""}),(0,t.bF)(f,{label:"体重",prop:"weight",sortable:""}),(0,t.bF)(f,{label:"BMI",prop:"bmi",sortable:""}),(0,t.bF)(f,{label:"年龄",prop:"age",sortable:""}),(0,t.bF)(f,{label:"心率",prop:"heart_rate",sortable:""}),(0,t.bF)(f,{label:"视力",prop:"vision",sortable:""}),(0,t.bF)(f,{label:"血压",prop:"blood_pressure",sortable:""}),(0,t.bF)(f,{label:"血糖",prop:"blood_sugar",sortable:""}),(0,t.bF)(f,{label:"上传时间",prop:"upload_time",sortable:""}),(0,t.bF)(f,{label:"操作",width:"150"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bF)(F,{type:"primary",plain:"",onClick:l=>n.handleUpdate(e.id)},{default:(0,t.k6)((()=>[(0,t.eW)("更新")])),_:2},1032,["onClick"]),(0,t.bF)(F,{type:"danger",onClick:l=>n.deleteRecord(e.id),plain:""},{default:(0,t.k6)((()=>[(0,t.eW)("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data"])],64)}a(4603),a(7566),a(8721);var n=a(7284),s=a(4635),m={data(){return{columns:[],data:[],dataCopy:[],showDialog:!1,showUpdateDialog:!1,currentID:"",uploadForm:{height:"",weight:"",age:"",heart_rate:"",vision:"",blood_pressure:"",blood_sugar:""},updateForm:{id:"",height:"",weight:"",age:"",heart_rate:"",vision:"",blood_pressure:"",blood_sugar:""}}},methods:{uploadInfo(){""!==this.uploadForm.height&&""!==this.uploadForm.weight&&""!==this.uploadForm.age&&""!==this.uploadForm.heart_rate&&""!==this.uploadForm.vision&&""!==this.uploadForm.blood_pressure&&""!==this.uploadForm.blood_sugar?(0,n.L8)(this.uploadForm).then((()=>{this.$message.success("上传成功"),this.showDialog=!1,this.uploadForm={},this.queryAllRecord()})):this.$message.warning("请完整填写表单")},queryAllRecord(){(0,n.bl)().then((e=>{this.data=e.data.data[0],this.dataCopy=e.data.data[0]}))},deleteRecord(e){this.$confirm("此操作将删除该订单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,n.nt)(e).then((()=>{this.$message({type:"success",message:"删除成功!"}),this.queryAllRecord()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},updateRecord(){""!==this.updateForm.height&&""!==this.updateForm.weight&&""!==this.updateForm.age&&""!==this.updateForm.heart_rate&&""!==this.updateForm.vision&&""!==this.updateForm.blood_pressure&&""!==this.updateForm.blood_sugar&&""!==this.updateForm.id?(0,n.Rp)(this.updateForm).then((()=>{this.$message.success("更新成功"),this.showUpdateDialog=!1,this.updateForm={},this.queryAllRecord()})):this.$message.warning("请完整填写表单")},handleUpdate(e){this.updateForm.id=e,this.showUpdateDialog=!0},async downloadFile(){try{const e=await(0,s.A)({url:"/api/health/exportHealthRecordToCSV",method:"GET",responseType:"blob"}),l=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=l,a.setAttribute("download","HealthRecord.xlsx"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(l),document.body.removeChild(a)}catch(e){console.error("下载文件失败",e)}}},mounted(){this.queryAllRecord()},watch:{currentID(e){for(let l=0;l<this.dataCopy.length;l++)this.dataCopy[l].id.toString()===e&&(this.data=[this.dataCopy[l]]);""!==e&&null!==e||(this.data=this.dataCopy)}}},h=a(1241);const b=(0,h.A)(m,[["render",p],["__scopeId","data-v-147daeba"]]);var F=b}}]);